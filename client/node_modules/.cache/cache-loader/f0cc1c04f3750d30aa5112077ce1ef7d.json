{"remainingRequest":"/Users/zhangqiong/betalpha/node/client/node_modules/thread-loader/dist/cjs.js??ref--4-2!/Users/zhangqiong/betalpha/node/client/node_modules/babel-loader/lib/index.js??ref--4-3!/Users/zhangqiong/betalpha/node/client/src/root/login.js","dependencies":[{"path":"/Users/zhangqiong/betalpha/node/client/src/root/login.js","mtime":1563783978000},{"path":"/Users/zhangqiong/betalpha/node/client/.babelrc","mtime":1563172830000},{"path":"/Users/zhangqiong/betalpha/node/client/node_modules/react-hot-loader/webpack.js","mtime":499162500000},{"path":"/Users/zhangqiong/betalpha/node/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangqiong/betalpha/node/client/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhangqiong/betalpha/node/client/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY29tcG9zZSwgcHVyZSwgd2l0aEhhbmRsZXJzLCBsaWZlY3ljbGUgfSBmcm9tICdyZWNvbXBvc2UnOwppbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnOwppbXBvcnQgRm9ybSBmcm9tICdhbnRkL2xpYi9mb3JtJzsKaW1wb3J0IElucHV0IGZyb20gJ2FudGQvbGliL2lucHV0JzsKaW1wb3J0IEJ1dHRvbiBmcm9tICdhbnRkL2xpYi9idXR0b24nOwppbXBvcnQgTWVzc2FnZSBmcm9tICdhbnRkL2xpYi9tZXNzYWdlJzsKaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gJ3JlYWN0LXJlZHV4JzsKaW1wb3J0IHsgc2V0U3RhdGUgYXMgc2V0U3RhdGVBY3Rpb24sIGxvZ2luIGFzIGxvZ2luQWN0aW9uIH0gZnJvbSAnLi9hY3Rpb25zJzsKaW1wb3J0ICcuL2luZGV4LmNzcyc7Cgp2YXIgc29ja2V0ID0gcmVxdWlyZSgnc29ja2V0LmlvLWNsaWVudCcpKCdodHRwOi8vbG9jYWxob3N0OjgwODAnKTsgLy/lrqLmiLfnq69zb2NrZXQuaW8KCgp2YXIgRm9ybUl0ZW0gPSBGb3JtLkl0ZW07CmV4cG9ydCBkZWZhdWx0IGNvbXBvc2UocHVyZSwgY29ubmVjdChmdW5jdGlvbiAoc3RhdGUpIHsKICByZXR1cm4gc3RhdGUucm9vdDsKfSwgewogIGxvZ2luOiBsb2dpbkFjdGlvbiwKICBzZXRTdGF0ZTogc2V0U3RhdGVBY3Rpb24KfSksIHdpdGhIYW5kbGVycyh7CiAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKF9yZWYpIHsKICAgIHZhciBfbG9naW4gPSBfcmVmLmxvZ2luLAogICAgICAgIHVzZXJuYW1lID0gX3JlZi51c2VybmFtZSwKICAgICAgICBwYXNzd29yZCA9IF9yZWYucGFzc3dvcmQ7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICBfbG9naW4oewogICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSwKICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgc29ja2V0LmVtaXQoJ2xvZ2luU3VjY2VzcycsIHVzZXJuYW1lKTsKICAgICAgICBzb2NrZXQub24oJ3N1Y2Nlc3MnLCBmdW5jdGlvbiAoc3VjY2Vzc01zZykgewogICAgICAgICAgTWVzc2FnZS5zdWNjZXNzKHN1Y2Nlc3NNc2cpOwogICAgICAgIH0pOwogICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoKSB7CiAgICAgICAgc29ja2V0LmVtaXQoJ2xvZ2luRmFpbGVkJyk7CiAgICAgICAgc29ja2V0Lm9uKCdmYWlsZWQnLCBmdW5jdGlvbiAoZXJyb3JNc2cpIHsKICAgICAgICAgIE1lc3NhZ2Uuc3VjY2VzcyhlcnJvck1zZyk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfTsKICB9LAogIHVwZGF0ZU5hbWU6IGZ1bmN0aW9uIHVwZGF0ZU5hbWUoX3JlZjIpIHsKICAgIHZhciBzZXRTdGF0ZSA9IF9yZWYyLnNldFN0YXRlOwogICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7CiAgICAgIHNldFN0YXRlKHsKICAgICAgICB1c2VybmFtZTogZS50YXJnZXQudmFsdWUKICAgICAgfSk7CiAgICB9OwogIH0sCiAgdXBkYXRlUGFzc3dvcmQ6IGZ1bmN0aW9uIHVwZGF0ZVBhc3N3b3JkKF9yZWYzKSB7CiAgICB2YXIgc2V0U3RhdGUgPSBfcmVmMy5zZXRTdGF0ZTsKICAgIHJldHVybiBmdW5jdGlvbiAoZSkgewogICAgICBzZXRTdGF0ZSh7CiAgICAgICAgcGFzc3dvcmQ6IGUudGFyZ2V0LnZhbHVlCiAgICAgIH0pOwogICAgfTsKICB9Cn0pKShmdW5jdGlvbiAoX3JlZjQpIHsKICB2YXIgdXNlcm5hbWUgPSBfcmVmNC51c2VybmFtZSwKICAgICAgcGFzc3dvcmQgPSBfcmVmNC5wYXNzd29yZCwKICAgICAgbG9naW4gPSBfcmVmNC5sb2dpbiwKICAgICAgdXBkYXRlTmFtZSA9IF9yZWY0LnVwZGF0ZU5hbWUsCiAgICAgIHVwZGF0ZVBhc3N3b3JkID0gX3JlZjQudXBkYXRlUGFzc3dvcmQ7CiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIG51bGwsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRm9ybSwgewogICAgbGF5b3V0OiAiaW5saW5lIiwKICAgIGF1dG9Db21wbGV0ZTogIm9mZiIKICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1JdGVtLCB7CiAgICBsYWJlbDogIlx1NTlEMyIKICB9LCBSZWFjdC5jcmVhdGVFbGVtZW50KElucHV0LCB7CiAgICBjbGFzc05hbWU6ICJJbnB1dCIsCiAgICBvbkNoYW5nZTogdXBkYXRlTmFtZSwKICAgIHZhbHVlOiB1c2VybmFtZQogIH0pKSwgUmVhY3QuY3JlYXRlRWxlbWVudChGb3JtSXRlbSwgewogICAgbGFiZWw6ICJcdTU0MEQiCiAgfSwgUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dCwgewogICAgY2xhc3NOYW1lOiAiSW5wdXQiLAogICAgdmFsdWU6IHBhc3N3b3JkLAogICAgb25DaGFuZ2U6IHVwZGF0ZVBhc3N3b3JkCiAgfSkpLCBSZWFjdC5jcmVhdGVFbGVtZW50KEZvcm1JdGVtLCBudWxsLCBSZWFjdC5jcmVhdGVFbGVtZW50KEJ1dHRvbiwgewogICAgb25DbGljazogbG9naW4sCiAgICBzaXplOiAibGFyZ2UiLAogICAgdHlwZTogInByaW1hcnkiLAogICAgaHRtbFR5cGU6ICJzdWJtaXQiCiAgfSwgIlx1NzY3Qlx1NUY1NSIpKSkpOwp9KTs="},{"version":3,"sources":["/Users/zhangqiong/betalpha/node/client/src/root/login.js"],"names":["compose","pure","withHandlers","lifecycle","React","Form","Input","Button","Message","connect","setState","setStateAction","login","loginAction","socket","require","FormItem","Item","state","root","username","password","then","emit","on","successMsg","success","errorMsg","updateName","e","target","value","updatePassword"],"mappings":"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","sourcesContent":["import { compose, pure, withHandlers, lifecycle } from 'recompose';\nimport React from 'react';\nimport Form from 'antd/lib/form';\nimport Input from 'antd/lib/input';\nimport Button from 'antd/lib/button';\nimport Message from 'antd/lib/message';\nimport { connect } from 'react-redux';\n\nimport {\n  setState as setStateAction,\n  login as loginAction,\n} from './actions';\n\nimport './index.css';\nconst socket = require('socket.io-client')('http://localhost:8080');   //客户端socket.io\n\nconst FormItem = Form.Item;\n\nexport default compose(\n  pure,\n  connect((state) => (state.root), {\n    login: loginAction,\n    setState: setStateAction,\n  }),\n  withHandlers({\n    login: ({ login, username, password }) => () => {\n      login({ username, password }).then(() => {\n        socket.emit('loginSuccess', username);\n\n        socket.on('success', (successMsg) => {\n          Message.success(successMsg)\n        });\n      }).catch(() => {\n        socket.emit('loginFailed');\n\n        socket.on('failed', (errorMsg) => {\n          Message.success(errorMsg)\n        });\n      })\n    },\n    updateName: ({ setState }) => (e) => {\n      setState({ username: e.target.value });\n    },\n    updatePassword: ({ setState }) => (e) => {\n      setState({ password: e.target.value });\n    }\n  }),\n)(({ username, password, login, updateName, updatePassword }) => (\n  <div>\n    <Form layout=\"inline\" autoComplete=\"off\">\n      <FormItem label=\"姓\">\n        <Input\n          className=\"Input\"\n          onChange={updateName}\n          value={username}\n        />\n      </FormItem>\n      <FormItem label=\"名\">\n        <Input\n          className=\"Input\"\n          value={password}\n          onChange={updatePassword}\n        />\n      </FormItem>\n      <FormItem>\n        <Button\n          onClick={login}\n          size=\"large\"\n          type=\"primary\"\n          htmlType=\"submit\"\n        >\n          登录\n        </Button>\n      </FormItem>\n    </Form>\n\n  </div>\n))"]}]}